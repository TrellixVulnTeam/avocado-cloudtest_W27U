{% set users_per_tenant = users_per_tenant or "2" %}
{% set tenants = tenants or "2" %}
{% set concurrency = concurrency or "1" %}
{% set times = times or "10" %}
---
  CeilometerStats.get_stats:
    -
      runner:
        type: constant
        times: {{times}}
        concurrency: {{concurrency}}
      context:
        users:
          tenants: {{tenants}}
          users_per_tenant: {{users_per_tenant}}
        ceilometer:
          counter_name: "volume.size"
          counter_type: "gauge"
          counter_unit: "%"
          counter_volume: 100
          resources_per_tenant: 100
          samples_per_resource: 100
          timestamp_interval: 10
          metadata_list:
            -
              status: "active"
              name: "rally benchmark on"
              deleted: "false"
            -
              status: "terminated"
              name: "rally benchmark off"
              deleted: "true"
      args:
        meter_name: "volume.size"
        filter_by_user_id: true
        filter_by_project_id: true
        filter_by_resource_id: true
        metadata_query:
          status: "terminated"
        period: 300
        groupby: "resource_id"
